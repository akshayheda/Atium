<html>
    <div id="container-floating">
        <div id="nd3 nds" class="nd3 nds" data-toggle="tooltip" data-placement="left" data-original-title="contract@gmail.com" onmouseover="hoverSummary()"><img class="reminder">
            <img class="reminder" src="https://docs.google.com/uc?id=1aGRGnuDNrDg6MDXCkaav3b2S25rZoz2C" />
            <div id="meme2" style="display: none">
                <u1 class="list-group">
                    <li id="summarized" class="list-group-item">
                        <b><div id="boldie"></div></b><div id="summary">Loading...</div>
                    </li>
                </u1>
            </div>
        </div>
        <div id="nd1 nds" class="nd1 nds" data-toggle="tooltip" data-placement="left" data-original-title="Edoardo@live.it" onmouseover="hoverURLs()"><img class="reminder">
            <img class="reminder" src="https://docs.google.com/uc?id=1k9XqJ8T3mdse8lu5NR_zY2Z8zLu0RN0E" />
            
            <div id="meme" style="display: none">
                <ul class="list-group">
                    <li class="list-group-item"><b>SIMILAR LINKS</b></li>
                    <li id="link1" class="list-group-item">Loading...</li>
                    <li id="link2" class="list-group-item">Loading...</li>
                    <li id="link3" class="list-group-item">Loading...</li>
                    <li id="link4" class="list-group-item">Loading...</li>
                    <li id="link5" class="list-group-item">Loading...</li>
                </ul>
            </div>
        </div>
        
        <div id="floating-button" data-toggle="tooltip" data-placement="left" data-original-title="Create" onclick="clickedPlus()">
            <p id="plusid" class="plus">
                ·
            </p>
        </div>
    </div>

    <script>
        console.log("should have made the floaty boi");
        
        window.onload = function(){
            noURLs();
            noSummary();
        }
        localStorage.setItem('plussed', 'false');

        var checker = setInterval(checkerFunction, 250);
        
        var counter = 0;
        var loading = true;
        function checkerFunction(){
            console.log("iterating");
            if(JSON.parse(localStorage.getItem('link')) == null || JSON.parse(localStorage.getItem('link')).summary.length < 1){
                document.getElementById("floating-button").style.background = "#444444";
                
                document.getElementById("nd3 nds").style.display = "none";          
                document.getElementById("nd1 nds").style.display = "none";          
                

                if(counter == 0){
                    document.getElementById("plusid").textContent = ("·");
                } else if (counter == 1){
                    document.getElementById("plusid").textContent = ("··");
                } else if (counter == 2){
                    document.getElementById("plusid").textContent = ("···");
                } else if (counter == 3){
                    document.getElementById("plusid").textContent = ("··"); 
                    counter = -1;                             
                }
                counter++;
                
            } else {
                document.getElementById("nd3 nds").style.display = "block";          
                document.getElementById("nd1 nds").style.display = "block";     

                console.log(JSON.parse(localStorage.getItem('link')).summary)
                document.getElementById("plusid").textContent = "+";
                document.getElementById("floating-button").style.background = "#db4437"; // The red.
                clearInterval(checker);
                loading = false;
            }
        }

        function no_u(){
            noURLs();
            noSummary();
        }

        function noSummary(){
            document.getElementById("meme2").style.display = "none";          
        }

        function hoverSummary(){
            noURLs();
            document.getElementById("meme2").style.display = "block";
            document.getElementById("boldie").textContent = "SUMMARY: "
            document.getElementById("summary").textContent = JSON.parse(localStorage.getItem('link')).summary;
        }

        function noURLs(){
            document.getElementById("meme").style.display = "none";
        }

        function hoverURLs(){
            noSummary();
            document.getElementById("meme").style.display = "block";
            document.getElementById("link1").textContent = JSON.parse(localStorage.getItem('link')).links[0].name;
            document.getElementById("link1").onclick = function(){
                window.open(JSON.parse(localStorage.getItem('link')).links[0].url);
            }
            document.getElementById("link2").textContent = JSON.parse(localStorage.getItem('link')).links[1].name;
            document.getElementById("link2").onclick = function(){
                window.open(JSON.parse(localStorage.getItem('link')).links[1].url);
            }
            document.getElementById("link3").textContent = JSON.parse(localStorage.getItem('link')).links[2].name;
            document.getElementById("link3").onclick = function(){
                window.open(JSON.parse(localStorage.getItem('link')).links[2].url);
            }
            document.getElementById("link4").textContent = JSON.parse(localStorage.getItem('link')).links[3].name;
            document.getElementById("link4").onclick = function(){
                window.open(JSON.parse(localStorage.getItem('link')).links[3].url);
            }
            document.getElementById("link5").textContent = JSON.parse(localStorage.getItem('link')).links[4].name;
            document.getElementById("link5").onclick = function(){
                window.open(JSON.parse(localStorage.getItem('link')).links[4].url);
            }
        }

        function clickedPlus(){
            localStorage.setItem('plussed', 'true');
            console.log("Clicked plus.");
        }
    </script>
</html>